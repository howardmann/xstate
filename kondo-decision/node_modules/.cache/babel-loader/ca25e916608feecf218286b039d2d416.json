{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = require(\"react\");\n\nvar xstate_1 = require(\"xstate\");\n\nvar defaultOptions = {\n  immediate: false\n};\n\nfunction useMachine(machine, options) {\n  if (options === void 0) {\n    options = defaultOptions;\n  }\n\n  var context = options.context,\n      guards = options.guards,\n      actions = options.actions,\n      activities = options.activities,\n      services = options.services,\n      delays = options.delays,\n      immediate = options.immediate,\n      rehydratedState = options.state,\n      interpreterOptions = __rest(options, [\"context\", \"guards\", \"actions\", \"activities\", \"services\", \"delays\", \"immediate\", \"state\"]);\n\n  var machineConfig = {\n    context: context,\n    guards: guards,\n    actions: actions,\n    activities: activities,\n    services: services,\n    delays: delays\n  }; // Reference the machine\n\n  var machineRef = react_1.useRef(null); // Create the machine only once\n  // See https://reactjs.org/docs/hooks-faq.html#how-to-create-expensive-objects-lazily\n\n  if (machineRef.current === null) {\n    machineRef.current = machine.withConfig(machineConfig, __assign(__assign({}, machine.context), context));\n  } // Reference the service\n\n\n  var serviceRef = react_1.useRef(null); // Create the service only once\n\n  if (serviceRef.current === null) {\n    serviceRef.current = xstate_1.interpret(machineRef.current, interpreterOptions).onTransition(function (state) {\n      // Update the current machine state when a transition occurs\n      if (state.changed) {\n        setCurrent(state);\n      }\n    });\n  }\n\n  var service = serviceRef.current; // Make sure actions and services are kept updated when they change.\n  // This mutation assignment is safe because the service instance is only used\n  // in one place -- this hook's caller.\n\n  react_1.useEffect(function () {\n    Object.assign(service.machine.options.actions, actions);\n  }, [actions]);\n  react_1.useEffect(function () {\n    Object.assign(service.machine.options.services, services);\n  }, [services]); // Keep track of the current machine state\n\n  var initialState = rehydratedState ? xstate_1.State.create(rehydratedState) : service.initialState;\n\n  var _a = __read(react_1.useState(function () {\n    return initialState;\n  }), 2),\n      current = _a[0],\n      setCurrent = _a[1]; // Start service immediately (before mount) if specified in options\n\n\n  if (immediate) {\n    service.start();\n  }\n\n  react_1.useEffect(function () {\n    // Start the service when the component mounts.\n    // Note: the service will start only if it hasn't started already.\n    //\n    // If a rehydrated state was provided, use the resolved `initialState`.\n    service.start(rehydratedState ? initialState : undefined);\n    return function () {\n      // Stop the service when the component unmounts\n      service.stop();\n    };\n  }, []);\n  return [current, service.send, service];\n}\n\nexports.useMachine = useMachine;\n\nfunction useService(service) {\n  var _a = __read(react_1.useState(service.state), 2),\n      current = _a[0],\n      setCurrent = _a[1];\n\n  react_1.useEffect(function () {\n    // Set to current service state as there is a possibility\n    // of a transition occurring between the initial useState()\n    // initialization and useEffect() commit.\n    setCurrent(service.state);\n\n    var listener = function (state) {\n      if (state.changed) {\n        setCurrent(state);\n      }\n    };\n\n    var sub = service.subscribe(listener);\n    return function () {\n      sub.unsubscribe();\n    };\n  }, [service]);\n  return [current, service.send, service];\n}\n\nexports.useService = useService;\n\nvar useActor_1 = require(\"./useActor\");\n\nexports.useActor = useActor_1.useActor;","map":{"version":3,"sources":["/Users/howardmann/Howie/practice/xstate/kondo-decision/node_modules/@xstate/react/lib/index.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__read","o","m","Symbol","iterator","r","ar","next","done","push","value","error","defineProperty","exports","react_1","require","xstate_1","defaultOptions","immediate","useMachine","machine","options","context","guards","actions","activities","services","delays","rehydratedState","state","interpreterOptions","machineConfig","machineRef","useRef","current","withConfig","serviceRef","interpret","onTransition","changed","setCurrent","service","useEffect","initialState","State","create","_a","useState","start","undefined","stop","send","useService","listener","sub","subscribe","unsubscribe","useActor_1","useActor"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar xstate_1 = require(\"xstate\");\nvar defaultOptions = {\n    immediate: false\n};\nfunction useMachine(machine, options) {\n    if (options === void 0) { options = defaultOptions; }\n    var context = options.context, guards = options.guards, actions = options.actions, activities = options.activities, services = options.services, delays = options.delays, immediate = options.immediate, rehydratedState = options.state, interpreterOptions = __rest(options, [\"context\", \"guards\", \"actions\", \"activities\", \"services\", \"delays\", \"immediate\", \"state\"]);\n    var machineConfig = {\n        context: context,\n        guards: guards,\n        actions: actions,\n        activities: activities,\n        services: services,\n        delays: delays\n    };\n    // Reference the machine\n    var machineRef = react_1.useRef(null);\n    // Create the machine only once\n    // See https://reactjs.org/docs/hooks-faq.html#how-to-create-expensive-objects-lazily\n    if (machineRef.current === null) {\n        machineRef.current = machine.withConfig(machineConfig, __assign(__assign({}, machine.context), context));\n    }\n    // Reference the service\n    var serviceRef = react_1.useRef(null);\n    // Create the service only once\n    if (serviceRef.current === null) {\n        serviceRef.current = xstate_1.interpret(machineRef.current, interpreterOptions).onTransition(function (state) {\n            // Update the current machine state when a transition occurs\n            if (state.changed) {\n                setCurrent(state);\n            }\n        });\n    }\n    var service = serviceRef.current;\n    // Make sure actions and services are kept updated when they change.\n    // This mutation assignment is safe because the service instance is only used\n    // in one place -- this hook's caller.\n    react_1.useEffect(function () {\n        Object.assign(service.machine.options.actions, actions);\n    }, [actions]);\n    react_1.useEffect(function () {\n        Object.assign(service.machine.options.services, services);\n    }, [services]);\n    // Keep track of the current machine state\n    var initialState = rehydratedState\n        ? xstate_1.State.create(rehydratedState)\n        : service.initialState;\n    var _a = __read(react_1.useState(function () { return initialState; }), 2), current = _a[0], setCurrent = _a[1];\n    // Start service immediately (before mount) if specified in options\n    if (immediate) {\n        service.start();\n    }\n    react_1.useEffect(function () {\n        // Start the service when the component mounts.\n        // Note: the service will start only if it hasn't started already.\n        //\n        // If a rehydrated state was provided, use the resolved `initialState`.\n        service.start(rehydratedState ? initialState : undefined);\n        return function () {\n            // Stop the service when the component unmounts\n            service.stop();\n        };\n    }, []);\n    return [current, service.send, service];\n}\nexports.useMachine = useMachine;\nfunction useService(service) {\n    var _a = __read(react_1.useState(service.state), 2), current = _a[0], setCurrent = _a[1];\n    react_1.useEffect(function () {\n        // Set to current service state as there is a possibility\n        // of a transition occurring between the initial useState()\n        // initialization and useEffect() commit.\n        setCurrent(service.state);\n        var listener = function (state) {\n            if (state.changed) {\n                setCurrent(state);\n            }\n        };\n        var sub = service.subscribe(listener);\n        return function () {\n            sub.unsubscribe();\n        };\n    }, [service]);\n    return [current, service.send, service];\n}\nexports.useService = useService;\nvar useActor_1 = require(\"./useActor\");\nexports.useActor = useActor_1.useActor;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}